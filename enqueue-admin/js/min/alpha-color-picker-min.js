function acp_get_alpha_value_from_color(a){var o;return a=a.replace(/ /g,""),a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)?(o=100*parseFloat(a.match(/rgba\(\d+\,\d+\,\d+\,([^\)]+)\)/)[1]).toFixed(2),o=parseInt(o)):o=100,o}function acp_update_alpha_value_on_color_control(a,o,l,e){var r,t,i;r=o.data("a8cIris"),t=o.data("wpWpColorPicker"),r._color._alpha=a,i=r._color.toString(),o.val(i),t.toggler.css({"background-color":i}),e&&acp_update_alpha_value_on_alpha_slider(a,l),o.wpColorPicker("color",i)}function acp_update_alpha_value_on_alpha_slider(a,o){o.slider("value",a),o.find(".ui-slider-handle").text(a.toString())}Color.prototype.toString=function(a){if("no-alpha"==a)return this.toCSS("rgba","1").replace(/\s+/g,"");if(1>this._alpha)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var o=parseInt(this._color,10).toString(16);if(this.error)return"";if(o.length<6)for(var l=6-o.length-1;l>=0;l--)o="0"+o;return"#"+o},jQuery(document).ready(function($){$(".alpha-color-control").each(function(){var a,o,l,e,r,t,i,c,n,p,_;a=$(this),o=a.val().replace(/\s+/g,""),l=a.attr("data-palette"),e=a.attr("data-show-opacity"),r=a.attr("data-default-color"),t=l.indexOf("|")!==-1?l.split("|"):"false"!=l,i={change:function(o,l){var e,t,i,p;e=a.attr("data-customize-setting-link"),t=a.wpColorPicker("color"),r==t&&(i=acp_get_alpha_value_from_color(t),n.find(".ui-slider-handle").text(i)),wp.customize(e,function(a){a.set(t)}),p=c.find(".transparency"),p.css("background-color",l.color.toString("no-alpha"))},palettes:t},a.wpColorPicker(i),c=a.parents(".wp-picker-container:first"),$('<div class="alpha-color-picker-container"><div class="min-click-zone click-zone"></div><div class="max-click-zone click-zone"></div><div class="alpha-slider"></div><div class="transparency"></div></div>').appendTo(c.find(".wp-picker-holder")),n=c.find(".alpha-slider"),p=acp_get_alpha_value_from_color(o),_={create:function(a,l){var e=$(this).slider("value");$(this).find(".ui-slider-handle").text(e),$(this).siblings(".transparency ").css("background-color",o)},value:p,range:"max",step:1,min:0,max:100,animate:300},n.slider(_),"true"==e&&n.find(".ui-slider-handle").addClass("show-opacity"),c.find(".min-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(0,a,n,!0)}),c.find(".max-click-zone").on("click",function(){acp_update_alpha_value_on_color_control(100,a,n,!0)}),c.find(".iris-palette").on("click",function(){var o,l;o=$(this).css("background-color"),l=acp_get_alpha_value_from_color(o),acp_update_alpha_value_on_alpha_slider(l,n),100!=l&&(o=o.replace(/[^,]+(?=\))/,(l/100).toFixed(2))),a.wpColorPicker("color",o)}),c.find(".button.wp-picker-clear").on("click",function(){var o=a.attr("data-customize-setting-link");a.wpColorPicker("color","#ffffff"),wp.customize(o,function(a){a.set("")}),acp_update_alpha_value_on_alpha_slider(100,n)}),c.find(".button.wp-picker-default").on("click",function(){var a=acp_get_alpha_value_from_color(r);acp_update_alpha_value_on_alpha_slider(a,n)}),a.on("input",function(){var a=$(this).val(),o=acp_get_alpha_value_from_color(a);acp_update_alpha_value_on_alpha_slider(o,n)}),n.slider().on("slide",function(o,l){var e=parseFloat(l.value)/100;acp_update_alpha_value_on_color_control(e,a,n,!1),$(this).find(".ui-slider-handle").text(l.value)})})});